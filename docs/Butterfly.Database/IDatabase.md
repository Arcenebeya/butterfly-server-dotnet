# IDatabase interface

Allows executing INSERT, UPDATE, and DELETE statements; creating dynamic views; and receiving data change events both on tables and dynamic views.

Adding records and echoing all data change events to the console...

```csharp
// Create database instance (will also read the schema from the database)
var database = new SomeDatabase();

// Listen for all database data events
var databaseListener = database.OnNewCommittedTransaction(dataEventTransaction => {
    console.WriteLine($"Low Level DataEventTransaction={dataEventTransaction}");
});

// INSERT a couple of records (this will cause a single data even transaction with
// two INSERT data events to be written to the console above)
using (var transaction = database.BeginTransaction()) {
    await database.InsertAndCommitAsync("employee", values: {
        department_id: 1,
        name: "SpongeBob"
    });
    await database.InsertAndCommitAsync("employee", values: {
        department_id: 1,
        name: "Squidward"
    });
    await database.CommitAsync();
);
```

Creating a DynamicView and echoing data change events on the DynamicView to the console...

```csharp
// Create database instance (will also read the schema from the database)
var database = new SomeDatabase();

// Create a DynamicViewSet that print any data events to the console
// (this will immediately echo an INITIAL data event for each existing matching record)
var dynamicViewSet = database.CreateAndStartDynamicViewSet(
    "SELECT * FROM employee WHERE department_id=@departmentId", 
    new {
        departmentId = 1
    },
    dataEventTransaction => {
        Console.WriteLine(dataEventTransaction);
    }
);

// This will cause the above DynamicViewSet to echo an INSERT data event
await database.InsertAndCommitAsync("employee", values: {
    department_id: 1
    name: "Mr Crabs"
});

// This will NOT cause the above DynamicViewSet to echo an INSERT data event
// (because the department_id doesn't match)
await database.InsertAndCommitAsync("employee", values: {
    department_id: 2
    name: "Patrick Star"
});
```

```csharp
public interface IDatabase
```

## Members

| name | description |
| --- | --- |
| [ConnectionString](IDatabase/ConnectionString.md) { get; } |  |
| [Tables](IDatabase/Tables.md) { get; } |  |
| [BeginTransaction](IDatabase/BeginTransaction.md)() |  |
| [CreateDynamicView](IDatabase/CreateDynamicView.md)(…) |  (2 methods) |
| [CreateDynamicViewSet](IDatabase/CreateDynamicViewSet.md)(…) |  (2 methods) |
| [CreateFromResourceFileAsync](IDatabase/CreateFromResourceFileAsync.md)(…) | Creates database tables from an embedded resource file by internally calling CreateFromTextAsync with the contents of the embedded resource file ([`CreateFromTextAsync`](IDatabase/CreateFromTextAsync.md). |
| [CreateFromTextAsync](IDatabase/CreateFromTextAsync.md)(…) | Creates database tables from a string containing a semicolon delimited series of CREATE statements in MySQL format (will be converted to native database format as appropriate). |
| [DeleteAndCommitAsync](IDatabase/DeleteAndCommitAsync.md)(…) |  |
| [GetInitialDataEventsAsync](IDatabase/GetInitialDataEventsAsync.md)(…) | Executes the select statement of the DynamicQuery and returns a sequence of DataChange events starting an InitialBegin event, then an Insert event for each row, and then an InitialEnd event. |
| [GetInitialDataEventTransactionAsync](IDatabase/GetInitialDataEventTransactionAsync.md)(…) |  |
| [InsertAndCommitAsync](IDatabase/InsertAndCommitAsync.md)(…) |  |
| [OnNewCommittedTransaction](IDatabase/OnNewCommittedTransaction.md)(…) |  (2 methods) |
| [OnNewUncommittedTransaction](IDatabase/OnNewUncommittedTransaction.md)(…) |  (2 methods) |
| [SelectRowAsync](IDatabase/SelectRowAsync.md)(…) |  |
| [SelectRowsAsync](IDatabase/SelectRowsAsync.md)(…) |  (3 methods) |
| [SelectValue&lt;T&gt;](IDatabase/SelectValue.md)(…) |  |
| [SetDefaultValue](IDatabase/SetDefaultValue.md)(…) |  |
| [UpdateAndCommitAsync](IDatabase/UpdateAndCommitAsync.md)(…) |  |

## See Also

* namespace [Butterfly.Database](../Butterfly.Database.md)

<!-- DO NOT EDIT: generated by xmldocmd for Butterfly.Database.dll -->
