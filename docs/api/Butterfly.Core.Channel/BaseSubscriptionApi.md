# BaseSubscriptionApi class

Allows clients to subscribe to channels and allows the server to push data to subscribed clients.

Allows clients to subscribe to channels and allows the server to push data to subscribed clients.

```csharp
public abstract class BaseSubscriptionApi : ISubscriptionApi
```

## Public Members

| name | description |
| --- | --- |
| [BaseSubscriptionApi](BaseSubscriptionApi/BaseSubscriptionApi.md)(…) |  |
| [AuthenticatedConnections](BaseSubscriptionApi/AuthenticatedConnections.md) { get; } | Get all the authenticted connections |
| [ChannelSubscriptionByKey](BaseSubscriptionApi/ChannelSubscriptionByKey.md) { get; } |  |
| [UnauthenticatedConnections](BaseSubscriptionApi/UnauthenticatedConnections.md) { get; } | Get all the unauthenticted connections |
| readonly [getAuthToken](BaseSubscriptionApi/getAuthToken.md) |  |
| readonly [getAuthTokenAsync](BaseSubscriptionApi/getAuthTokenAsync.md) |  |
| readonly [getId](BaseSubscriptionApi/getId.md) |  |
| readonly [getIdAsync](BaseSubscriptionApi/getIdAsync.md) |  |
| [AddUnauthenticatedConnection](BaseSubscriptionApi/AddUnauthenticatedConnection.md)(…) |  |
| [Dispose](BaseSubscriptionApi/Dispose.md)() |  |
| [GetConnection](BaseSubscriptionApi/GetConnection.md)(…) | Retrieve a channel by id |
| [OnSubscribe](BaseSubscriptionApi/OnSubscribe.md)(…) | Define a channel that clients can subscribe. Can specify a *handler* or a *handlerAsync* (but not both) that is invoked when a client subscribes. |
| [Start](BaseSubscriptionApi/Start.md)() | Starts the channel server |

## Remarks

Listen for subscription requests to the todos channel...

```csharp
var subscriptionApi = new SomeSubscriptionApi();
// Listen for subscribe requests...
// - The handler must return an IDisposable object (gets disposed when the channel is unsubscribed)
// - The handler can push data to the client by calling channel.Queue()
subscriptionApi.OnSubscribe("todos", (vars, channel) => {
    return database.CreateAndStartDynamicView("todo", dataEventTransaction => channel.Queue(dataEventTransaction));
});
subscriptionApi.Start();
```

Listen for subscription requests to the todos channel...

```csharp
var subscriptionApi = new SomeSubscriptionApi();
// Listen for subscribe requests...
// - The handler must return an IDisposable object (gets disposed when the channel is unsubscribed)
// - The handler can push data to the client by calling channel.Queue()
subscriptionApi.OnSubscribe("todos", (vars, channel) => {
    return database.CreateAndStartDynamicView("todo", dataEventTransaction => channel.Queue(dataEventTransaction));
});
subscriptionApi.Start();
```

## See Also

* interface [ISubscriptionApi](ISubscriptionApi.md)
* namespace [Butterfly.Core.Channel](../Butterfly.Core.md)

<!-- DO NOT EDIT: generated by xmldocmd for Butterfly.Core.dll -->
