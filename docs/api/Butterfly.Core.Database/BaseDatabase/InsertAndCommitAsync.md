# BaseDatabase.InsertAndCommitAsync&lt;T&gt; method

Executes an INSERT statement as a single transaction

```csharp
public Task<T> InsertAndCommitAsync<T>(string insertStatement, object vars, 
    bool ignoreIfDuplicate = false)
```

| parameter | description |
| --- | --- |
| insertStatement | Either a table name or a full INSERT statement with vars prefixed by @ (like |
| vars | Either an anonymous type or a Dictionary. If *insertStatement* is a table name, the *vars* values will be used to build the UPDATE statement. If *insertStatement* is a full INSERT statement, there must be one entry for each var referenced in *insertStatement*. |
| ignoreIfDuplicate | If the INSERT attempts to duplicate the primary key then either throw an [`DuplicateKeyDatabaseException`](../DuplicateKeyDatabaseException.md) error if *ignoreIfDuplicate* is true or just ignore if *ignoreIfDuplicate* is false |

## Return Value

Primary key value (semi-colon delimited string if multi-field primary key)

## Remarks

Do an INSERT using the table name and an anonymous type...

```csharp
await database.InsertAndCommitAsync("message", new {
    text = "Hello",
    owner_id = "123",
});
```

Do an INSERT using a full statement and a Dictionary...

```csharp
await database.InsertAndCommitAsync("INSERT INTO message (text, owner_id) VALUES (@t, @oid)", new Dictionary<string, object> {
    ["t"] = "Hello",
    ["oid"] = "123",
});
```

## See Also

* class [BaseDatabase](../BaseDatabase.md)
* namespace [Butterfly.Core.Database](../../Butterfly.Core.md)

<!-- DO NOT EDIT: generated by xmldocmd for Butterfly.Core.dll -->
